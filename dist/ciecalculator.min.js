(function(e){var t="undefined";if(typeof exports=="object"&&typeof module!==t)module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n;typeof window!==t?n=window:typeof global!==t?n=global:typeof self!==t?n=self:n=this,n.CIECalculator=e()}})(function(){var define,module,exports;return function e(t,n,r){function o(a,f){if(!n[a]){if(!t[a]){var l=typeof require==i&&require;if(!f&&l)return l(a,!0);if(u)return u(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var d=n[a]={exports:{}};t[a][0].call(d[s],function(e){var n=t[a][1][e];return o(n?n:e)},d,d[s],e,t,n,r)}return n[a][s]}var i="function",s="exports",u=typeof require==i&&require;for(var a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";var r="reference",i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:1,max:19}}};if(!o.validateInput(e,t)){var n=new Error("Longitud invalida");throw n.status="422",n}var i=0,s=e[r].split("").reverse().join("");for(var u=0;u<e[r].length;u++)i+=o.sequentialAdd(parseInt(s[u],10)*((u+1)%2!==0?2:1));return e[r]+(o.nearestMultipleOf(i,10)-i)%10}},t.exports.Alg00=u},{"./cie_strategy.js":14,"./cie_utils.js":15}],2:[function(e,t,n){"use strict";var r="toUpperCase",i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:6,max:19}}};if(!o.validateInput(e,t))throw new Error("Longitud invalida");var n=0,i=a(e);for(var s=0;s<i.length;s++)n+=o.sequentialAdd(parseInt(i[s],10)*((s+1)%2!==0?1:2));return e.reference[r]()+(o.nearestMultipleOf(n,10)-n)%10}},t.exports.Alg02=u;var a=function(e){var t={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};return o.replaceCharWithNum(e.reference[r](),t)}},{"./cie_strategy.js":14,"./cie_utils.js":15}],3:[function(e,t,n){"use strict";var r=e("underscore"),i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:1,max:19}}};if(!o.validateInput(e,t))throw new Error("Longitud invalida");var n=0,r=a(e);for(var i=0;i<r.length;i++)n+=parseInt(r[i],10)*(i+2);return e.reference+(7-n%7)}},t.exports.Alg03=u;var a=function(e){return r.last(e.reference,6).reverse()}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],4:[function(e,t,n){"use strict";var r=e("underscore"),i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:1,max:18}}};if(!o.validateInput(e,t))throw new Error("Longitud invalida");var n=a(e),r=o.weightedReduce(n,[11,13,17,19,23])-n[0]*11;return e.reference+((r+330)%97+1)}},t.exports.Alg04=u;var a=function(e){return r.toArray(e.reference).reverse()}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],5:[function(e,t,n){"use strict";var r=e("underscore"),i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:1,max:18}},branch:{length:{min:1,max:8}},account:{length:{min:1,max:8}}};if(!o.validateInput(e,t))throw new Error("Longitud invalida");var n=a(e),r=o.weightedReduce(n,[37,31,29,23,19,17,13,11]);return e.reference+(99-r%97)}},t.exports.Alg06=u;var a=function(e){var t=r.toArray(o.pad(e.branch,8)),n=r.toArray(o.pad(e.account,8)),i=r.last(o.pad(e.reference,8),8);return t.concat(n,i).reverse()}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],6:[function(e,t,n){"use strict";var r="weightedReduce",i="reference",s="substr",o=e("underscore"),u=e("./cie_strategy.js").CIEStrategy,a=e("./cie_utils.js").CIEUtils,f=new a,l=function(){};l.prototype=new u,l.prototype={execute:function(e){var t={reference:{length:{min:1,max:12}},date:{length:{min:8,max:8}},amount:{length:{min:1,max:12}}};if(!f.validateInput(e,t))throw new Error("Longitud invalida");var n=c(e),s=f[r](n[i],[11,13,17,19,23]);return e[i]+n.date+n.amount+"2"+f.pad(s%97+1,2)}},t.exports.Alg10=l;var c=function(e){var t=f.pad((e.date[s](4,4)-2014)*372+(e.date[s](2,2)-1)*31+(e.date[s](0,2)-1),4),n=f[r](o.without(o.toArray(e.amount),".").reverse(),[7,3,1])%10;return{reference:o.toArray(e[i]+t+n+"2").reverse(),amount:n,date:t}}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],7:[function(e,t,n){"use strict";var r="toUpperCase",i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:1,max:19}}};if(!o.validateInput(e,t))throw new Error("Longitud invalida");var n=o.sequentialWeightedReduce(a(e),[4,3,8]);return e.reference[r]()+(o.nearestMultipleOf(n,10)-n)%10}},t.exports.Alg35=u;var a=function(e){var t={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:10,K:11,L:12,M:13,N:14,O:15,P:16,Q:17,R:18,S:19,T:20,U:21,V:22,W:23,X:24,Y:25,Z:26,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};return o.replaceCharWithNum(e.reference[r](),t)}},{"./cie_strategy.js":14,"./cie_utils.js":15}],8:[function(e,t,n){"use strict";var r="toUpperCase",i=e("underscore"),s=e("./cie_strategy.js").CIEStrategy,o=e("./cie_utils.js").CIEUtils,u=new o,a=function(){};a.prototype=new s,a.prototype={execute:function(e){var t={reference:{length:{min:1,max:19}}};if(!u.validateInput(e,t))throw new Error("Longitud invalida");var n=u.sequentialWeightedReduce(f(e),[2,1]);return e.reference[r]()+(u.nearestMultipleOf(n,10)-n)%10}},t.exports.Alg36=a;var f=function(e){var t={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};return i.toArray(u.replaceCharWithNum(e.reference[r](),t)).reverse()}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],9:[function(e,t,n){"use strict";var r="toUpperCase",i=e("underscore"),s=e("./cie_strategy.js").CIEStrategy,o=e("./cie_utils.js").CIEUtils,u=new o,a=function(){};a.prototype=new s,a.prototype={execute:function(e){var t={reference:{length:{min:1,max:19}}};if(!u.validateInput(e,t))throw new Error("Longitud invalida");var n=f(e),i=u.weightedReduce(n,[11,13,17,19,23]);return e.reference[r]()+u.pad((i+330-n[0]*11)%97+1,2)}},t.exports.Alg37=a;var f=function(e){var t={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};return i.toArray(u.replaceCharWithNum(e.reference[r](),t)).reverse()}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],10:[function(e,t,n){"use strict";var r="substr",i="toArray",s="length",o=e("underscore"),u=e("./cie_strategy.js").CIEStrategy,a=e("./cie_utils.js").CIEUtils,f=new a,l=function(){};l.prototype=new u,l.prototype={execute:function(e){var t={reference:{length:{min:1,max:10}},date:{length:{min:8,max:8}},amount:{length:{min:1,max:12}}};if(!f.validateInput(e,t))throw new Error("Longitud invalida");var n=c(e);return e.reference+n.date+n.amount+"2"}},t.exports.Alg62=l;var c=function(e){var t=f.pad((e.date[r](4,4)-1988)*372+(e.date[r](2,2)-1)*31+(e.date[r](0,2)-1),4),n=h(o.without(o[i](e.amount),".")),s=p(o[i](n).reverse(),[7,3,1]);return{reference:o[i](e.reference+t+s+"2").reverse(),amount:s,date:t}},h=function(e){return o.reduce(e,function(e,t){var n=e[s]<8?t+(parseInt(t)+1)+"":t;return e+n},"")},p=function(e,t,n){var r=0,i="";for(var o=0;o<e[s];o++)n&&console.log("input: "+e[o]+" w: "+t[o%t[s]]+" = "+parseInt(e[o]*t[o%t[s]])),r+=parseInt(e[o]*t[o%t[s]]),r=f.sequentialAdd(r),parseInt(o)%3==2&&(i+=r%10);return i}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],11:[function(e,t,n){"use strict";var r="weightedReduce",i="reference",s="substr",o=e("underscore"),u=e("./cie_strategy.js").CIEStrategy,a=e("./cie_utils.js").CIEUtils,f=new a,l=function(){};l.prototype=new u,l.prototype={execute:function(e){var t={reference:{length:{min:1,max:12}},date:{length:{min:8,max:8}},amount:{length:{min:1,max:12}}};if(!f.validateInput(e,t))throw new Error("Longitud invalida");var n=c(e),s=f[r](n[i],[11,13,17,19,23]);return e[i]+n.date+n.amount+"2"+f.pad(s%97+1,2)}},t.exports.Alg77=l;var c=function(e){var t=f.pad((e.date[s](4,4)-2013)*372+(e.date[s](2,2)-1)*31+(e.date[s](0,2)-1),4),n=f[r](o.without(o.toArray(e.amount),".").reverse(),[7,3,1])%10;return{reference:o.toArray(e[i]+t+n+"2").reverse(),amount:n,date:t}}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],12:[function(e,t,n){"use strict";var r="weightedReduce",i="reference",s="substr",o=e("underscore"),u=e("./cie_strategy.js").CIEStrategy,a=e("./cie_utils.js").CIEUtils,f=new a,l=function(){};l.prototype=new u,l.prototype={execute:function(e){var t={reference:{length:{min:15,max:42}},date:{length:{min:8,max:8}},amount:{length:{min:1,max:12}},digit:{length:{min:1,max:1}}};if(!f.validateInput(e,t))throw new Error("Longitud invalida");var n=c(e),s=f[r](n[i],[11,13,17,19,23]);return e[i]+n.date+n.amount+e.digit+f.pad(s%97+1,2)}},t.exports.Alg82=l;var c=function(e){var t={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0},n=f.replaceCharWithNum(e[i].toUpperCase(),t).join(""),u=f.pad((e.date[s](4,4)-2014)*372+(e.date[s](2,2)-1)*31+(e.date[s](0,2)-1),4),a=f[r](o.without(o.toArray(e.amount),".").reverse(),[7,3,1])%10;return{reference:o.toArray(n+u+a+e.digit).reverse(),amount:a,date:u}}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],13:[function(e,t,n){"use strict";var r="strategy",i=function(){this[r]=""};i.prototype={setStrategy:function(e){this[r]=e},execute:function(e){return this[r].execute(e)}},t.exports.CIECalculator=i},{}],14:[function(e,t,n){"use strict";var r=function(){};r.prototype={execute:function(){throw new Error("CIEStrategy#execute needs to be overridden.")}},t.exports.CIEStrategy=r},{}],15:[function(e,t,n){"use strict";var r="prototype",i="length",s="input: ",o=" w: ",u="sequentialAdd",a=e("underscore"),f=function(){};f[r]={nearestMultipleOf:function(e,t){return(Math.floor(e/t)+1)*t},sequentialAdd:function(e){return a.reduce(e.toString(),function(e,t){return e+parseInt(t)},0)},replaceCharWithNum:function(e,t){return a.map(e,function(e){return t[e]})},pad:function(e,t,n){return n=n||"0",e+="",e[i]>=t?e:(new Array(t-e[i]+1)).join(n)+e},validateLength:function(e,t,n){return e[i]>=t&&e[i]<=n},weightedReduce:function(e,t,n){var r=0;for(var u=0;u<e[i];u++)n&&console.log(s+e[u]+o+t[u%t[i]]+" = "+parseInt(e[u]*t[u%t[i]])),r+=parseInt(e[u]*t[u%t[i]]);return r},sequentialWeightedReduce:function(e,t,n){var a=0;for(var l=0;l<e[i];l++){n&&console.log(s+e[l]+o+t[l%t[i]]+" = "+f[r][u](parseInt(e[l]*t[l%t[i]])));var c=f[r][u](parseInt(e[l]*t[l%t[i]]));while(c.toString()[i]!==1)c=f[r][u](c);a+=c}return a},validateInput:function(e,t){var n=function(e,t){return a.reduce(a.keys(t),function(n,s){return n&&f[r].validateLength(e[s],t[s][i].min,t[s][i].max)},!0)};return n(e,t)}},t.exports.CIEUtils=f},{underscore:17}],16:[function(require,module,exports){"use strict";var CIECalculator=require("./lib/strategies/cie_calculator.js").CIECalculator,Alg00=require("./lib/strategies/alg00.js").Alg00,Alg02=require("./lib/strategies/alg02.js").Alg02,Alg03=require("./lib/strategies/alg03.js").Alg03,Alg04=require("./lib/strategies/alg04.js").Alg04,Alg06=require("./lib/strategies/alg06.js").Alg06,Alg10=require("./lib/strategies/alg10.js").Alg10,Alg35=require("./lib/strategies/alg35.js").Alg35,Alg36=require("./lib/strategies/alg36.js").Alg36,Alg37=require("./lib/strategies/alg37.js").Alg37,Alg37=require("./lib/strategies/alg62.js").Alg62,Alg77=require("./lib/strategies/alg77.js").Alg77,Alg82=require("./lib/strategies/alg82.js").Alg82;module.exports=function(params){var calculator=new CIECalculator;return calculator.setStrategy(eval("new Alg"+params.alg+"()")),calculator.execute(params)}},{"./lib/strategies/alg00.js":1,"./lib/strategies/alg02.js":2,"./lib/strategies/alg03.js":3,"./lib/strategies/alg04.js":4,"./lib/strategies/alg06.js":5,"./lib/strategies/alg10.js":6,"./lib/strategies/alg35.js":7,"./lib/strategies/alg36.js":8,"./lib/strategies/alg37.js":9,"./lib/strategies/alg62.js":10,"./lib/strategies/alg77.js":11,"./lib/strategies/alg82.js":12,"./lib/strategies/cie_calculator.js":13}],17:[function(e,t,n){var r="call",i="prototype",s="push",o="slice",u="concat",a="isArray",f="keys",l="_wrapped",c="undefined",h=null,p="apply",d="iteratee",v="identity",m="isFunction",g="isObject",y="matches",b="property",w="each",E="length",S=!0,x="filter",T="negate",N=!1,C="contains",k="values",L="indexOf",A="random",O="sortedIndex",M="isArguments",_="difference",D="object",P="number",H="partial",B="[object Boolean]",j="constructor",F="[object Array]",I="function",q="replace",R="templateSettings",U="source",z="'+\n((__t=(",W="';\n",X="variable",V="shift",$="splice";((function(){var e=this,Y=e._,Z=Array[i],et=Object[i],tt=Function[i],nt=Z[s],rt=Z[o],it=Z[u],st=et.toString,ot=et.hasOwnProperty,ut=Array[a],at=Object[f],ft=tt.bind,lt=function(e){if(e instanceof lt)return e;if(!(this instanceof lt))return new lt(e);this[l]=e};typeof n!==c?(typeof t!==c&&t.exports&&(n=t.exports=lt),n._=lt):e._=lt,lt.VERSION="1.7.0";var ct=function(e,t,n){if(t===void 0)return e;switch(n==h?3:n){case 1:return function(n){return e[r](t,n)};case 2:return function(n,i){return e[r](t,n,i)};case 3:return function(n,i,s){return e[r](t,n,i,s)};case 4:return function(n,i,s,o){return e[r](t,n,i,s,o)}}return function(){return e[p](t,arguments)}};lt[d]=function(e,t,n){return e==h?lt[v]:lt[m](e)?ct(e,t,n):lt[g](e)?lt[y](e):lt[b](e)},lt[w]=lt.forEach=function(e,t,n){if(e==h)return e;t=ct(t,n);var r,i=e[E];if(i===+i)for(r=0;r<i;r++)t(e[r],r,e);else{var s=lt[f](e);for(r=0,i=s[E];r<i;r++)t(e[s[r]],s[r],e)}return e},lt.map=lt.collect=function(e,t,n){if(e==h)return[];t=lt[d](t,n);var r=e[E]!==+e[E]&&lt[f](e),i=(r||e)[E],s=Array(i),o;for(var u=0;u<i;u++)o=r?r[u]:u,s[u]=t(e[o],o,e);return s};var ht="Reduce of empty array with no initial value";lt.reduce=lt.foldl=lt.inject=function(e,t,n,r){e==h&&(e=[]),t=ct(t,r,4);var i=e[E]!==+e[E]&&lt[f](e),s=(i||e)[E],o=0,u;if(arguments[E]<3){if(!s)throw new TypeError(ht);n=e[i?i[o++]:o++]}for(;o<s;o++)u=i?i[o]:o,n=t(n,e[u],u,e);return n},lt.reduceRight=lt.foldr=function(e,t,n,r){e==h&&(e=[]),t=ct(t,r,4);var i=e[E]!==+e[E]&&lt[f](e),s=(i||e)[E],o;if(arguments[E]<3){if(!s)throw new TypeError(ht);n=e[i?i[--s]:--s]}while(s--)o=i?i[s]:s,n=t(n,e[o],o,e);return n},lt.find=lt.detect=function(e,t,n){var r;return t=lt[d](t,n),lt.some(e,function(e,n,i){if(t(e,n,i))return r=e,S}),r},lt[x]=lt.select=function(e,t,n){var r=[];return e==h?r:(t=lt[d](t,n),lt[w](e,function(e,n,i){t(e,n,i)&&r[s](e)}),r)},lt.reject=function(e,t,n){return lt[x](e,lt[T](lt[d](t)),n)},lt.every=lt.all=function(e,t,n){if(e==h)return S;t=lt[d](t,n);var r=e[E]!==+e[E]&&lt[f](e),i=(r||e)[E],s,o;for(s=0;s<i;s++){o=r?r[s]:s;if(!t(e[o],o,e))return N}return S},lt.some=lt.any=function(e,t,n){if(e==h)return N;t=lt[d](t,n);var r=e[E]!==+e[E]&&lt[f](e),i=(r||e)[E],s,o;for(s=0;s<i;s++){o=r?r[s]:s;if(t(e[o],o,e))return S}return N},lt[C]=lt.include=function(e,t){return e==h?N:(e[E]!==+e[E]&&(e=lt[k](e)),lt[L](e,t)>=0)},lt.invoke=function(e,t){var n=rt[r](arguments,2),i=lt[m](t);return lt.map(e,function(e){return(i?t:e[t])[p](e,n)})},lt.pluck=function(e,t){return lt.map(e,lt[b](t))},lt.where=function(e,t){return lt[x](e,lt[y](t))},lt.findWhere=function(e,t){return lt.find(e,lt[y](t))},lt.max=function(e,t,n){var r=-Infinity,i=-Infinity,s,o;if(t==h&&e!=h){e=e[E]===+e[E]?e:lt[k](e);for(var u=0,a=e[E];u<a;u++)s=e[u],s>r&&(r=s)}else t=lt[d](t,n),lt[w](e,function(e,n,s){o=t(e,n,s);if(o>i||o===-Infinity&&r===-Infinity)r=e,i=o});return r},lt.min=function(e,t,n){var r=Infinity,i=Infinity,s,o;if(t==h&&e!=h){e=e[E]===+e[E]?e:lt[k](e);for(var u=0,a=e[E];u<a;u++)s=e[u],s<r&&(r=s)}else t=lt[d](t,n),lt[w](e,function(e,n,s){o=t(e,n,s);if(o<i||o===Infinity&&r===Infinity)r=e,i=o});return r},lt.shuffle=function(e){var t=e&&e[E]===+e[E]?e:lt[k](e),n=t[E],r=Array(n);for(var i=0,s;i<n;i++)s=lt[A](0,i),s!==i&&(r[i]=r[s]),r[s]=t[i];return r},lt.sample=function(e,t,n){return t==h||n?(e[E]!==+e[E]&&(e=lt[k](e)),e[lt[A](e[E]-1)]):lt.shuffle(e)[o](0,Math.max(0,t))},lt.sortBy=function(e,t,n){return t=lt[d](t,n),lt.pluck(lt.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var pt=function(e){return function(t,n,r){var i={};return n=lt[d](n,r),lt[w](t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};lt.groupBy=pt(function(e,t,n){lt.has(e,n)?e[n][s](t):e[n]=[t]}),lt.indexBy=pt(function(e,t,n){e[n]=t}),lt.countBy=pt(function(e,t,n){lt.has(e,n)?e[n]++:e[n]=1}),lt[O]=function(e,t,n,r){n=lt[d](n,r,1);var i=n(t),s=0,o=e[E];while(s<o){var u=s+o>>>1;n(e[u])<i?s=u+1:o=u}return s},lt.toArray=function(e){return e?lt[a](e)?rt[r](e):e[E]===+e[E]?lt.map(e,lt[v]):lt[k](e):[]},lt.size=function(e){return e==h?0:e[E]===+e[E]?e[E]:lt[f](e)[E]},lt.partition=function(e,t,n){t=lt[d](t,n);var r=[],i=[];return lt[w](e,function(e,n,o){(t(e,n,o)?r:i)[s](e)}),[r,i]},lt.first=lt.head=lt.take=function(e,t,n){return e==h?void 0:t==h||n?e[0]:t<0?[]:rt[r](e,0,t)},lt.initial=function(e,t,n){return rt[r](e,0,Math.max(0,e[E]-(t==h||n?1:t)))},lt.last=function(e,t,n){return e==h?void 0:t==h||n?e[e[E]-1]:rt[r](e,Math.max(e[E]-t,0))},lt.rest=lt.tail=lt.drop=function(e,t,n){return rt[r](e,t==h||n?1:t)},lt.compact=function(e){return lt[x](e,lt[v])};var dt=function(e,t,n,r){if(t&&lt.every(e,lt[a]))return it[p](r,e);for(var i=0,o=e[E];i<o;i++){var u=e[i];!lt[a](u)&&!lt[M](u)?n||r[s](u):t?nt[p](r,u):dt(u,t,n,r)}return r};lt.flatten=function(e,t){return dt(e,t,N,[])},lt.without=function(e){return lt[_](e,rt[r](arguments,1))},lt.uniq=lt.unique=function(e,t,n,r){if(e==h)return[];lt.isBoolean(t)||(r=n,n=t,t=N),n!=h&&(n=lt[d](n,r));var i=[],o=[];for(var u=0,a=e[E];u<a;u++){var f=e[u];if(t)(!u||o!==f)&&i[s](f),o=f;else if(n){var l=n(f,u,e);lt[L](o,l)<0&&(o[s](l),i[s](f))}else lt[L](i,f)<0&&i[s](f)}return i},lt.union=function(){return lt.uniq(dt(arguments,S,S,[]))},lt.intersection=function(e){if(e==h)return[];var t=[],n=arguments[E];for(var r=0,i=e[E];r<i;r++){var o=e[r];if(lt[C](t,o))continue;for(var u=1;u<n;u++)if(!lt[C](arguments[u],o))break;u===n&&t[s](o)}return t},lt[_]=function(e){var t=dt(rt[r](arguments,1),S,S,[]);return lt[x](e,function(e){return!lt[C](t,e)})},lt.zip=function(e){if(e==h)return[];var t=lt.max(arguments,E)[E],n=Array(t);for(var r=0;r<t;r++)n[r]=lt.pluck(arguments,r);return n},lt[D]=function(e,t){if(e==h)return{};var n={};for(var r=0,i=e[E];r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},lt[L]=function(e,t,n){if(e==h)return-1;var r=0,i=e[E];if(n){if(typeof n!=P)return r=lt[O](e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}for(;r<i;r++)if(e[r]===t)return r;return-1},lt.lastIndexOf=function(e,t,n){if(e==h)return-1;var r=e[E];typeof n==P&&(r=n<0?r+n+1:Math.min(r,n+1));while(--r>=0)if(e[r]===t)return r;return-1},lt.range=function(e,t,n){arguments[E]<=1&&(t=e||0,e=0),n=n||1;var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r);for(var s=0;s<r;s++,e+=n)i[s]=e;return i};var vt=function(){};lt.bind=function(e,t){var n,s;if(ft&&e.bind===ft)return ft[p](e,rt[r](arguments,1));if(!lt[m](e))throw new TypeError("Bind must be called on a function");return n=rt[r](arguments,2),s=function(){if(this instanceof s){vt[i]=e[i];var o=new vt;vt[i]=h;var a=e[p](o,n[u](rt[r](arguments)));return lt[g](a)?a:o}return e[p](t,n[u](rt[r](arguments)))},s},lt[H]=function(e){var t=rt[r](arguments,1);return function(){var n=0,r=t[o]();for(var i=0,u=r[E];i<u;i++)r[i]===lt&&(r[i]=arguments[n++]);while(n<arguments[E])r[s](arguments[n++]);return e[p](this,r)}},lt.bindAll=function(e){var t,n=arguments[E],r;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=lt.bind(e[r],e);return e},lt.memoize=function(e,t){var n=function(r){var i=n.cache,s=t?t[p](this,arguments):r;return lt.has(i,s)||(i[s]=e[p](this,arguments)),i[s]};return n.cache={},n},lt.delay=function(e,t){var n=rt[r](arguments,2);return setTimeout(function(){return e[p](h,n)},t)},lt.defer=function(e){return lt.delay[p](lt,[e,1][u](rt[r](arguments,1)))},lt.throttle=function(e,t,n){var r,i,s,o=h,u=0;n||(n={});var a=function(){u=n.leading===N?0:lt.now(),o=h,s=e[p](r,i),o||(r=i=h)};return function(){var f=lt.now();!u&&n.leading===N&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0||l>t?(clearTimeout(o),o=h,u=f,s=e[p](r,i),o||(r=i=h)):!o&&n.trailing!==N&&(o=setTimeout(a,l)),s}},lt.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=lt.now()-o;f<t&&f>0?r=setTimeout(a,t-f):(r=h,n||(u=e[p](s,i),r||(s=i=h)))};return function(){s=this,i=arguments,o=lt.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e[p](s,i),s=i=h),u}},lt.wrap=function(e,t){return lt[H](t,e)},lt[T]=function(e){return function(){return!e[p](this,arguments)}},lt.compose=function(){var e=arguments,t=e[E]-1;return function(){var n=t,i=e[t][p](this,arguments);while(n--)i=e[n][r](this,i);return i}},lt.after=function(e,t){return function(){if(--e<1)return t[p](this,arguments)}},lt.before=function(e,t){var n;return function(){return--e>0?n=t[p](this,arguments):t=h,n}},lt.once=lt[H](lt.before,2),lt[f]=function(e){if(!lt[g](e))return[];if(at)return at(e);var t=[];for(var n in e)lt.has(e,n)&&t[s](n);return t},lt[k]=function(e){var t=lt[f](e),n=t[E],r=Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},lt.pairs=function(e){var t=lt[f](e),n=t[E],r=Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},lt.invert=function(e){var t={},n=lt[f](e);for(var r=0,i=n[E];r<i;r++)t[e[n[r]]]=n[r];return t},lt.functions=lt.methods=function(e){var t=[];for(var n in e)lt[m](e[n])&&t[s](n);return t.sort()},lt.extend=function(e){if(!lt[g](e))return e;var t,n;for(var i=1,s=arguments[E];i<s;i++){t=arguments[i];for(n in t)ot[r](t,n)&&(e[n]=t[n])}return e},lt.pick=function(e,t,n){var i={},s;if(e==h)return i;if(lt[m](t)){t=ct(t,n);for(s in e){var o=e[s];t(o,s,e)&&(i[s]=o)}}else{var u=it[p]([],rt[r](arguments,1));e=new Object(e);for(var a=0,f=u[E];a<f;a++)s=u[a],s in e&&(i[s]=e[s])}return i},lt.omit=function(e,t,n){if(lt[m](t))t=lt[T](t);else{var i=lt.map(it[p]([],rt[r](arguments,1)),String);t=function(e,t){return!lt[C](i,t)}}return lt.pick(e,t,n)},lt.defaults=function(e){if(!lt[g](e))return e;for(var t=1,n=arguments[E];t<n;t++){var r=arguments[t];for(var i in r)e[i]===void 0&&(e[i]=r[i])}return e},lt.clone=function(e){return lt[g](e)?lt[a](e)?e[o]():lt.extend({},e):e},lt.tap=function(e,t){return t(e),e};var mt=function(e,t,n,i){if(e===t)return e!==0||1/e===1/t;if(e==h||t==h)return e===t;e instanceof lt&&(e=e[l]),t instanceof lt&&(t=t[l]);var o=st[r](e);if(o!==st[r](t))return N;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case B:return+e===+t}if(typeof e!=D||typeof t!=D)return N;var u=n[E];while(u--)if(n[u]===e)return i[u]===t;var a=e[j],c=t[j];if(a!==c&&j in e&&j in t&&!(lt[m](a)&&a instanceof a&&lt[m](c)&&c instanceof c))return N;n[s](e),i[s](t);var p,d;if(o===F){p=e[E],d=p===t[E];if(d)while(p--)if(!(d=mt(e[p],t[p],n,i)))break}else{var v=lt[f](e),g;p=v[E],d=lt[f](t)[E]===p;if(d)while(p--){g=v[p];if(!(d=lt.has(t,g)&&mt(e[g],t[g],n,i)))break}}return n.pop(),i.pop(),d};lt.isEqual=function(e,t){return mt(e,t,[],[])},lt.isEmpty=function(e){if(e==h)return S;if(lt[a](e)||lt.isString(e)||lt[M](e))return e[E]===0;for(var t in e)if(lt.has(e,t))return N;return S},lt.isElement=function(e){return!!e&&e.nodeType===1},lt[a]=ut||function(e){return st[r](e)===F},lt[g]=function(e){var t=typeof e;return t===I||t===D&&!!e},lt[w](["Arguments","Function","String","Number","Date","RegExp"],function(e){lt["is"+e]=function(t){return st[r](t)==="[object "+e+"]"}}),lt[M](arguments)||(lt[M]=function(e){return lt.has(e,"callee")}),typeof /./!==I&&(lt[m]=function(e){return typeof e==I||N}),lt.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},lt.isNaN=function(e){return lt.isNumber(e)&&e!==+e},lt.isBoolean=function(e){return e===S||e===N||st[r](e)===B},lt.isNull=function(e){return e===h},lt.isUndefined=function(e){return e===void 0},lt.has=function(e,t){return e!=h&&ot[r](e,t)},lt.noConflict=function(){return e._=Y,this},lt[v]=function(e){return e},lt.constant=function(e){return function(){return e}},lt.noop=function(){},lt[b]=function(e){return function(t){return t[e]}},lt[y]=function(e){var t=lt.pairs(e),n=t[E];return function(e){if(e==h)return!n;e=new Object(e);for(var r=0;r<n;r++){var i=t[r],s=i[0];if(i[1]!==e[s]||!(s in e))return N}return S}},lt.times=function(e,t,n){var r=Array(Math.max(0,e));t=ct(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},lt[A]=function(e,t){return t==h&&(t=e,e=0),e+Math.floor(Math[A]()*(t-e+1))},lt.now=Date.now||function(){return(new Date).getTime()};var gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},yt=lt.invert(gt),bt=function(e){var t=function(t){return e[t]},n="(?:"+lt[f](e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=e==h?"":""+e,r.test(e)?e[q](i,t):e}};lt.escape=bt(gt),lt.unescape=bt(yt),lt.result=function(e,t){if(e==h)return void 0;var n=e[t];return lt[m](n)?e[t]():n};var wt=0;lt.uniqueId=function(e){var t=++wt+"";return e?e+t:t},lt[R]={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Et=/(.)^/,St={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},xt=/\\|'|\r|\n|\u2028|\u2029/g,Tt=function(e){return"\\"+St[e]};lt.template=function(e,t,n){!t&&n&&(t=n),t=lt.defaults({},t,lt[R]);var i=RegExp([(t.escape||Et)[U],(t.interpolate||Et)[U],(t.evaluate||Et)[U]].join("|")+"|$","g"),s=0,u="__p+='";e[q](i,function(t,n,r,i,a){return u+=e[o](s,a)[q](xt,Tt),s=a+t[E],n?u+=z+n+"))==null?'':_.escape(__t))+\n'":r?u+=z+r+"))==null?'':__t)+\n'":i&&(u+=W+i+"\n__p+='"),t}),u+=W,t[X]||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{var a=new Function(t[X]||"obj","_",u)}catch(f){throw f[U]=u,f}var l=function(e){return a[r](this,e,lt)},c=t[X]||"obj";return l[U]="function("+c+"){\n"+u+"}",l},lt.chain=function(e){var t=lt(e);return t._chain=S,t};var Nt=function(e){return this._chain?lt(e).chain():e};lt.mixin=function(e){lt[w](lt.functions(e),function(t){var n=lt[t]=e[t];lt[i][t]=function(){var e=[this[l]];return nt[p](e,arguments),Nt[r](this,n[p](lt,e))}})},lt.mixin(lt),lt[w](["pop",s,"reverse",V,"sort",$,"unshift"],function(e){var t=Z[e];lt[i][e]=function(){var n=this[l];return t[p](n,arguments),(e===V||e===$)&&n[E]===0&&delete n[0],Nt[r](this,n)}}),lt[w]([u,"join",o],function(e){var t=Z[e];lt[i][e]=function(){return Nt[r](this,t[p](this[l],arguments))}}),lt[i].value=function(){return this[l]},typeof define===I&&define.amd&&define("underscore",[],function(){return lt})}))[r](this)},{}]},{},[16])(16)});