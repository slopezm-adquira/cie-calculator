(function(e){var t="undefined";if(typeof exports=="object"&&typeof module!==t)module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n;typeof window!==t?n=window:typeof global!==t?n=global:typeof self!==t?n=self:n=this,n.CIECalculator=e()}})(function(){var define,module,exports;return function e(t,n,r){function o(a,f){if(!n[a]){if(!t[a]){var l=typeof require==i&&require;if(!f&&l)return l(a,!0);if(u)return u(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var d=n[a]={exports:{}};t[a][0].call(d[s],function(e){var n=t[a][1][e];return o(n?n:e)},d,d[s],e,t,n,r)}return n[a][s]}var i="function",s="exports",u=typeof require==i&&require;for(var a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";var r="reference",i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:1,max:19}}};if(!o.validateInput(e,t)){var n=new Error("Longitud invalida");throw n.status="422",n}var i=0,s=e[r].split("").reverse().join("");for(var u=0;u<e[r].length;u++)i+=o.sequentialAdd(parseInt(s[u],10)*((u+1)%2!==0?2:1));return e[r]+(o.nearestMultipleOf(i,10)-i)%10}},t.exports.Alg00=u},{"./cie_strategy.js":14,"./cie_utils.js":15}],2:[function(e,t,n){"use strict";var r="toUpperCase",i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:6,max:19}}};if(!o.validateInput(e,t))throw new Error("Longitud invalida");var n=0,i=a(e);for(var s=0;s<i.length;s++)n+=o.sequentialAdd(parseInt(i[s],10)*((s+1)%2!==0?1:2));return e.reference[r]()+(o.nearestMultipleOf(n,10)-n)%10}},t.exports.Alg02=u;var a=function(e){var t={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};return o.replaceCharWithNum(e.reference[r](),t)}},{"./cie_strategy.js":14,"./cie_utils.js":15}],3:[function(e,t,n){"use strict";var r=e("underscore"),i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:1,max:19}}};if(!o.validateInput(e,t))throw new Error("Longitud invalida");var n=0,r=a(e);for(var i=0;i<r.length;i++)n+=parseInt(r[i],10)*(i+2);return e.reference+(7-n%7)}},t.exports.Alg03=u;var a=function(e){return r.last(e.reference,6).reverse()}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],4:[function(e,t,n){"use strict";var r=e("underscore"),i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:1,max:18}}};if(!o.validateInput(e,t))throw new Error("Longitud invalida");var n=a(e),r=o.weightedReduce(n,[11,13,17,19,23])-n[0]*11;return e.reference+((r+330)%97+1)}},t.exports.Alg04=u;var a=function(e){return r.toArray(e.reference).reverse()}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],5:[function(e,t,n){"use strict";var r=e("underscore"),i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:1,max:18}},branch:{length:{min:1,max:8}},account:{length:{min:1,max:8}}};if(!o.validateInput(e,t))throw new Error("Longitud invalida");var n=a(e),r=o.weightedReduce(n,[37,31,29,23,19,17,13,11]);return e.reference+(99-r%97)}},t.exports.Alg06=u;var a=function(e){var t=r.toArray(o.pad(e.branch,8)),n=r.toArray(o.pad(e.account,8)),i=r.last(o.pad(e.reference,8),8);return t.concat(n,i).reverse()}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],6:[function(e,t,n){"use strict";var r="weightedReduce",i="reference",s="substr",o=e("underscore"),u=e("./cie_strategy.js").CIEStrategy,a=e("./cie_utils.js").CIEUtils,f=new a,l=function(){};l.prototype=new u,l.prototype={execute:function(e){var t={reference:{length:{min:1,max:12}},date:{length:{min:8,max:8}},amount:{length:{min:1,max:12}}};if(!f.validateInput(e,t))throw new Error("Longitud invalida");var n=c(e),s=f[r](n[i],[11,13,17,19,23]);return e[i]+n.date+n.amount+"2"+f.pad(s%97+1,2)}},t.exports.Alg10=l;var c=function(e){var t=f.pad((e.date[s](4,4)-2014)*372+(e.date[s](2,2)-1)*31+(e.date[s](0,2)-1),4),n=f[r](o.without(o.toArray(e.amount),".").reverse(),[7,3,1])%10;return{reference:o.toArray(e[i]+t+n+"2").reverse(),amount:n,date:t}}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],7:[function(e,t,n){"use strict";var r="toUpperCase",i=e("./cie_strategy.js").CIEStrategy,s=e("./cie_utils.js").CIEUtils,o=new s,u=function(){};u.prototype=new i,u.prototype={execute:function(e){var t={reference:{length:{min:1,max:19}}};if(!o.validateInput(e,t))throw new Error("Longitud invalida");var n=o.sequentialWeightedReduce(a(e),[4,3,8]);return e.reference[r]()+(o.nearestMultipleOf(n,10)-n)%10}},t.exports.Alg35=u;var a=function(e){var t={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:10,K:11,L:12,M:13,N:14,O:15,P:16,Q:17,R:18,S:19,T:20,U:21,V:22,W:23,X:24,Y:25,Z:26,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};return o.replaceCharWithNum(e.reference[r](),t)}},{"./cie_strategy.js":14,"./cie_utils.js":15}],8:[function(e,t,n){"use strict";var r="toUpperCase",i=e("underscore"),s=e("./cie_strategy.js").CIEStrategy,o=e("./cie_utils.js").CIEUtils,u=new o,a=function(){};a.prototype=new s,a.prototype={execute:function(e){var t={reference:{length:{min:1,max:19}}};if(!u.validateInput(e,t))throw new Error("Longitud invalida");var n=u.sequentialWeightedReduce(f(e),[2,1]);return e.reference[r]()+(u.nearestMultipleOf(n,10)-n)%10}},t.exports.Alg36=a;var f=function(e){var t={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};return i.toArray(u.replaceCharWithNum(e.reference[r](),t)).reverse()}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],9:[function(e,t,n){"use strict";var r="toUpperCase",i=e("underscore"),s=e("./cie_strategy.js").CIEStrategy,o=e("./cie_utils.js").CIEUtils,u=new o,a=function(){};a.prototype=new s,a.prototype={execute:function(e){var t={reference:{length:{min:1,max:19}}};if(!u.validateInput(e,t))throw new Error("Longitud invalida");var n=f(e),i=u.weightedReduce(n,[11,13,17,19,23]);return e.reference[r]()+u.pad((i+330-n[0]*11)%97+1,2)}},t.exports.Alg37=a;var f=function(e){var t={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0};return i.toArray(u.replaceCharWithNum(e.reference[r](),t)).reverse()}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],10:[function(e,t,n){"use strict";var r="substr",i="toArray",s="length",o=e("underscore"),u=e("./cie_strategy.js").CIEStrategy,a=e("./cie_utils.js").CIEUtils,f=new a,l=function(){};l.prototype=new u,l.prototype={execute:function(e){var t={reference:{length:{min:1,max:10}},date:{length:{min:8,max:8}},amount:{length:{min:1,max:12}}};if(!f.validateInput(e,t))throw new Error("Longitud invalida");var n=c(e);return e.reference+n.date+n.amount+"2"}},t.exports.Alg62=l;var c=function(e){var t=f.pad((e.date[r](4,4)-1988)*372+(e.date[r](2,2)-1)*31+(e.date[r](0,2)-1),4),n=h(o.without(o[i](e.amount),".")),s=p(o[i](n).reverse(),[7,3,1]);return{reference:o[i](e.reference+t+s+"2").reverse(),amount:s,date:t}},h=function(e){return o.reduce(e,function(e,t){var n=e[s]<8?t+(parseInt(t)+1)+"":t;return e+n},"")},p=function(e,t,n){var r=0,i="";for(var o=0;o<e[s];o++)n&&console.log("input: "+e[o]+" w: "+t[o%t[s]]+" = "+parseInt(e[o]*t[o%t[s]])),r+=parseInt(e[o]*t[o%t[s]]),r=f.sequentialAdd(r),parseInt(o)%3==2&&(i+=r%10);return i}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],11:[function(e,t,n){"use strict";var r="weightedReduce",i="reference",s="substr",o=e("underscore"),u=e("./cie_strategy.js").CIEStrategy,a=e("./cie_utils.js").CIEUtils,f=new a,l=function(){};l.prototype=new u,l.prototype={execute:function(e){var t={reference:{length:{min:1,max:12}},date:{length:{min:8,max:8}},amount:{length:{min:1,max:12}}};if(!f.validateInput(e,t))throw new Error("Longitud invalida");var n=c(e),s=f[r](n[i],[11,13,17,19,23]);return e[i]+n.date+n.amount+"2"+f.pad(s%97+1,2)}},t.exports.Alg77=l;var c=function(e){var t=f.pad((e.date[s](4,4)-2013)*372+(e.date[s](2,2)-1)*31+(e.date[s](0,2)-1),4),n=f[r](o.without(o.toArray(e.amount),".").reverse(),[7,3,1])%10;return{reference:o.toArray(e[i]+t+n+"2").reverse(),amount:n,date:t}}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],12:[function(e,t,n){"use strict";var r="weightedReduce",i="reference",s="substr",o=e("underscore"),u=e("./cie_strategy.js").CIEStrategy,a=e("./cie_utils.js").CIEUtils,f=new a,l=function(){};l.prototype=new u,l.prototype={execute:function(e){var t={reference:{length:{min:15,max:42}},date:{length:{min:8,max:8}},amount:{length:{min:1,max:12}},digit:{length:{min:1,max:1}}};if(!f.validateInput(e,t))throw new Error("Longitud invalida");var n=c(e),s=f[r](n[i],[11,13,17,19,23]);return e[i]+n.date+n.amount+e.digit+f.pad(s%97+1,2)}},t.exports.Alg82=l;var c=function(e){var t={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,S:2,T:3,U:4,V:5,W:6,X:7,Y:8,Z:9,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,0:0},n=f.replaceCharWithNum(e[i].toUpperCase(),t).join(""),u=f.pad((e.date[s](4,4)-2014)*372+(e.date[s](2,2)-1)*31+(e.date[s](0,2)-1),4),a=f[r](o.without(o.toArray(e.amount),".").reverse(),[7,3,1])%10;return{reference:o.toArray(n+u+a+e.digit).reverse(),amount:a,date:u}}},{"./cie_strategy.js":14,"./cie_utils.js":15,underscore:17}],13:[function(e,t,n){"use strict";var r="strategy",i=function(){this[r]=""};i.prototype={setStrategy:function(e){this[r]=e},execute:function(e){return this[r].execute(e)}},t.exports.CIECalculator=i},{}],14:[function(e,t,n){"use strict";var r=function(){};r.prototype={execute:function(){throw new Error("CIEStrategy#execute needs to be overridden.")}},t.exports.CIEStrategy=r},{}],15:[function(e,t,n){"use strict";var r="prototype",i="length",s="input: ",o=" w: ",u="sequentialAdd",a=e("underscore"),f=function(){};f[r]={nearestMultipleOf:function(e,t){return(Math.floor(e/t)+1)*t},sequentialAdd:function(e){return a.reduce(e.toString(),function(e,t){return e+parseInt(t)},0)},replaceCharWithNum:function(e,t){return a.map(e,function(e){return t[e]})},pad:function(e,t,n){return n=n||"0",e+="",e[i]>=t?e:(new Array(t-e[i]+1)).join(n)+e},validateLength:function(e,t,n){return e[i]>=t&&e[i]<=n},weightedReduce:function(e,t,n){var r=0;for(var u=0;u<e[i];u++)n&&console.log(s+e[u]+o+t[u%t[i]]+" = "+parseInt(e[u]*t[u%t[i]])),r+=parseInt(e[u]*t[u%t[i]]);return r},sequentialWeightedReduce:function(e,t,n){var a=0;for(var l=0;l<e[i];l++){n&&console.log(s+e[l]+o+t[l%t[i]]+" = "+f[r][u](parseInt(e[l]*t[l%t[i]])));var c=f[r][u](parseInt(e[l]*t[l%t[i]]));while(c.toString()[i]!==1)c=f[r][u](c);a+=c}return a},validateInput:function(e,t){var n=function(e,t){return a.reduce(a.keys(t),function(n,s){return n&&f[r].validateLength(e[s],t[s][i].min,t[s][i].max)},!0)};return n(e,t)}},t.exports.CIEUtils=f},{underscore:17}],16:[function(require,module,exports){"use strict";var CIECalculator=require("./lib/strategies/cie_calculator.js").CIECalculator,Alg00=require("./lib/strategies/alg00.js").Alg00,Alg02=require("./lib/strategies/alg02.js").Alg02,Alg03=require("./lib/strategies/alg03.js").Alg03,Alg04=require("./lib/strategies/alg04.js").Alg04,Alg06=require("./lib/strategies/alg06.js").Alg06,Alg10=require("./lib/strategies/alg10.js").Alg10,Alg35=require("./lib/strategies/alg35.js").Alg35,Alg36=require("./lib/strategies/alg36.js").Alg36,Alg37=require("./lib/strategies/alg37.js").Alg37,Alg62=require("./lib/strategies/alg62.js").Alg62,Alg77=require("./lib/strategies/alg77.js").Alg77,Alg82=require("./lib/strategies/alg82.js").Alg82;module.exports=function(params){var calculator=new CIECalculator;return calculator.setStrategy(eval("new Alg"+params.alg+"()")),calculator.execute(params)}},{"./lib/strategies/alg00.js":1,"./lib/strategies/alg02.js":2,"./lib/strategies/alg03.js":3,"./lib/strategies/alg04.js":4,"./lib/strategies/alg06.js":5,"./lib/strategies/alg10.js":6,"./lib/strategies/alg35.js":7,"./lib/strategies/alg36.js":8,"./lib/strategies/alg37.js":9,"./lib/strategies/alg62.js":10,"./lib/strategies/alg77.js":11,"./lib/strategies/alg82.js":12,"./lib/strategies/cie_calculator.js":13}],17:[function(e,t,n){var r="length",i=null,s="prototype",o=!1,u="isFunction",a="apply",f="constructor",l="contains",c="call",h="_wrapped",p="push",d="keys",v=!0,m="isObject",g="function",y="object",b="isArguments",w="isArray",E="toString",S="values",x="propertyIsEnumerable",T="[object Boolean]",N="[object Array]",C="each",k="identity",L="number",A="source",O="filter",M="partial",_="slice",D="hasOwnProperty",P="matcher",H="allKeys",B="extendOwn",j="templateSettings",F="findIndex",I="undefined",q="'+\n((__t=(",R="random",U="property",z="findLastIndex",W="replace",X="value",V="sortedIndex",$="valueOf",J="negate",K="variable";((function(){function xt(e){function t(t,n,r,i,s,o){for(;s>=0&&s<o;s+=e){var u=i?i[s]:s;r=n(r,t[u],u,t)}return r}return function(n,i,s,o){i=vt(i,o,4);var u=!St(n)&&dt[d](n),a=(u||n)[r],f=e>0?0:a-1;return arguments[r]<3&&(s=n[u?u[f]:f],f+=e),t(n,i,s,u,f,a)}}function Ct(e){return function(t,n,r){n=mt(n,r);var i=Et(t),s=e>0?0:i-1;for(;s>=0&&s<i;s+=e)if(n(t[s],s,t))return s;return-1}}function kt(e,t,n){return function(r,i,s){var o=0,u=Et(r);if(typeof s==L)e>0?o=s>=0?s:Math.max(s+u,o):u=s>=0?Math.min(s+1,u):s+u+1;else if(n&&s&&u)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=t(ot[c](r,o,u),dt.isNaN),s>=0?s+o:-1;for(s=e>0?o:u-1;s>=0&&s<u;s+=e)if(r[s]===i)return s;return-1}}function Mt(e,t){var n=Ot[r],i=e[f],o=dt[u](i)&&i[s]||rt,a=f;dt.has(e,a)&&!dt[l](t,a)&&t[p](a);while(n--)a=Ot[n],a in e&&e[a]!==o[a]&&!dt[l](t,a)&&t[p](a)}var e=this,tt=e._,nt=Array[s],rt=Object[s],it=Function[s],st=nt[p],ot=nt[_],ut=rt[E],at=rt[D],ft=Array[w],lt=Object[d],ct=it.bind,ht=Object.create,pt=function(){},dt=function(e){if(e instanceof dt)return e;if(!(this instanceof dt))return new dt(e);this[h]=e};typeof n!==I?(typeof t!==I&&t.exports&&(n=t.exports=dt),n._=dt):e._=dt,dt.VERSION="1.8.3";var vt=function(e,t,n){if(t===void 0)return e;switch(n==i?3:n){case 1:return function(n){return e[c](t,n)};case 2:return function(n,r){return e[c](t,n,r)};case 3:return function(n,r,i){return e[c](t,n,r,i)};case 4:return function(n,r,i,s){return e[c](t,n,r,i,s)}}return function(){return e[a](t,arguments)}},mt=function(e,t,n){return e==i?dt[k]:dt[u](e)?vt(e,t,n):dt[m](e)?dt[P](e):dt[U](e)};dt.iteratee=function(e,t){return mt(e,t,Infinity)};var gt=function(e,t){return function(n){var s=arguments[r];if(s<2||n==i)return n;for(var o=1;o<s;o++){var u=arguments[o],a=e(u),f=a[r];for(var l=0;l<f;l++){var c=a[l];if(!t||n[c]===void 0)n[c]=u[c]}}return n}},yt=function(e){if(!dt[m](e))return{};if(ht)return ht(e);pt[s]=e;var t=new pt;return pt[s]=i,t},bt=function(e){return function(t){return t==i?void 0:t[e]}},wt=Math.pow(2,53)-1,Et=bt(r),St=function(e){var t=Et(e);return typeof t==L&&t>=0&&t<=wt};dt[C]=dt.forEach=function(e,t,n){t=vt(t,n);var i,s;if(St(e))for(i=0,s=e[r];i<s;i++)t(e[i],i,e);else{var o=dt[d](e);for(i=0,s=o[r];i<s;i++)t(e[o[i]],o[i],e)}return e},dt.map=dt.collect=function(e,t,n){t=mt(t,n);var i=!St(e)&&dt[d](e),s=(i||e)[r],o=Array(s);for(var u=0;u<s;u++){var a=i?i[u]:u;o[u]=t(e[a],a,e)}return o},dt.reduce=dt.foldl=dt.inject=xt(1),dt.reduceRight=dt.foldr=xt(-1),dt.find=dt.detect=function(e,t,n){var r;St(e)?r=dt[F](e,t,n):r=dt.findKey(e,t,n);if(r!==void 0&&r!==-1)return e[r]},dt[O]=dt.select=function(e,t,n){var r=[];return t=mt(t,n),dt[C](e,function(e,n,i){t(e,n,i)&&r[p](e)}),r},dt.reject=function(e,t,n){return dt[O](e,dt[J](mt(t)),n)},dt.every=dt.all=function(e,t,n){t=mt(t,n);var i=!St(e)&&dt[d](e),s=(i||e)[r];for(var u=0;u<s;u++){var a=i?i[u]:u;if(!t(e[a],a,e))return o}return v},dt.some=dt.any=function(e,t,n){t=mt(t,n);var i=!St(e)&&dt[d](e),s=(i||e)[r];for(var u=0;u<s;u++){var a=i?i[u]:u;if(t(e[a],a,e))return v}return o},dt[l]=dt.includes=dt.include=function(e,t,n,r){St(e)||(e=dt[S](e));if(typeof n!=L||r)n=0;return dt.indexOf(e,t,n)>=0},dt.invoke=function(e,t){var n=ot[c](arguments,2),r=dt[u](t);return dt.map(e,function(e){var s=r?t:e[t];return s==i?s:s[a](e,n)})},dt.pluck=function(e,t){return dt.map(e,dt[U](t))},dt.where=function(e,t){return dt[O](e,dt[P](t))},dt.findWhere=function(e,t){return dt.find(e,dt[P](t))},dt.max=function(e,t,n){var s=-Infinity,o=-Infinity,u,a;if(t==i&&e!=i){e=St(e)?e:dt[S](e);for(var f=0,l=e[r];f<l;f++)u=e[f],u>s&&(s=u)}else t=mt(t,n),dt[C](e,function(e,n,r){a=t(e,n,r);if(a>o||a===-Infinity&&s===-Infinity)s=e,o=a});return s},dt.min=function(e,t,n){var s=Infinity,o=Infinity,u,a;if(t==i&&e!=i){e=St(e)?e:dt[S](e);for(var f=0,l=e[r];f<l;f++)u=e[f],u<s&&(s=u)}else t=mt(t,n),dt[C](e,function(e,n,r){a=t(e,n,r);if(a<o||a===Infinity&&s===Infinity)s=e,o=a});return s},dt.shuffle=function(e){var t=St(e)?e:dt[S](e),n=t[r],i=Array(n);for(var s=0,o;s<n;s++)o=dt[R](0,s),o!==s&&(i[s]=i[o]),i[o]=t[s];return i},dt.sample=function(e,t,n){return t==i||n?(St(e)||(e=dt[S](e)),e[dt[R](e[r]-1)]):dt.shuffle(e)[_](0,Math.max(0,t))},dt.sortBy=function(e,t,n){return t=mt(t,n),dt.pluck(dt.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),X)};var Tt=function(e){return function(t,n,r){var i={};return n=mt(n,r),dt[C](t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};dt.groupBy=Tt(function(e,t,n){dt.has(e,n)?e[n][p](t):e[n]=[t]}),dt.indexBy=Tt(function(e,t,n){e[n]=t}),dt.countBy=Tt(function(e,t,n){dt.has(e,n)?e[n]++:e[n]=1}),dt.toArray=function(e){return e?dt[w](e)?ot[c](e):St(e)?dt.map(e,dt[k]):dt[S](e):[]},dt.size=function(e){return e==i?0:St(e)?e[r]:dt[d](e)[r]},dt.partition=function(e,t,n){t=mt(t,n);var r=[],i=[];return dt[C](e,function(e,n,s){(t(e,n,s)?r:i)[p](e)}),[r,i]},dt.first=dt.head=dt.take=function(e,t,n){return e==i?void 0:t==i||n?e[0]:dt.initial(e,e[r]-t)},dt.initial=function(e,t,n){return ot[c](e,0,Math.max(0,e[r]-(t==i||n?1:t)))},dt.last=function(e,t,n){return e==i?void 0:t==i||n?e[e[r]-1]:dt.rest(e,Math.max(0,e[r]-t))},dt.rest=dt.tail=dt.drop=function(e,t,n){return ot[c](e,t==i||n?1:t)},dt.compact=function(e){return dt[O](e,dt[k])};var Nt=function(e,t,n,i){var s=[],o=0;for(var u=i||0,a=Et(e);u<a;u++){var f=e[u];if(St(f)&&(dt[w](f)||dt[b](f))){t||(f=Nt(f,t,n));var l=0,c=f[r];s[r]+=c;while(l<c)s[o++]=f[l++]}else n||(s[o++]=f)}return s};dt.flatten=function(e,t){return Nt(e,t,o)},dt.without=function(e){return dt.difference(e,ot[c](arguments,1))},dt.uniq=dt.unique=function(e,t,n,r){dt.isBoolean(t)||(r=n,n=t,t=o),n!=i&&(n=mt(n,r));var s=[],u=[];for(var a=0,f=Et(e);a<f;a++){var c=e[a],h=n?n(c,a,e):c;t?((!a||u!==h)&&s[p](c),u=h):n?dt[l](u,h)||(u[p](h),s[p](c)):dt[l](s,c)||s[p](c)}return s},dt.union=function(){return dt.uniq(Nt(arguments,v,v))},dt.intersection=function(e){var t=[],n=arguments[r];for(var i=0,s=Et(e);i<s;i++){var o=e[i];if(dt[l](t,o))continue;for(var u=1;u<n;u++)if(!dt[l](arguments[u],o))break;u===n&&t[p](o)}return t},dt.difference=function(e){var t=Nt(arguments,v,v,1);return dt[O](e,function(e){return!dt[l](t,e)})},dt.zip=function(){return dt.unzip(arguments)},dt.unzip=function(e){var t=e&&dt.max(e,Et)[r]||0,n=Array(t);for(var i=0;i<t;i++)n[i]=dt.pluck(e,i);return n},dt[y]=function(e,t){var n={};for(var r=0,i=Et(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},dt[F]=Ct(1),dt[z]=Ct(-1),dt[V]=function(e,t,n,r){n=mt(n,r,1);var i=n(t),s=0,o=Et(e);while(s<o){var u=Math.floor((s+o)/2);n(e[u])<i?s=u+1:o=u}return s},dt.indexOf=kt(1,dt[F],dt[V]),dt.lastIndexOf=kt(-1,dt[z]),dt.range=function(e,t,n){t==i&&(t=e||0,e=0),n=n||1;var r=Math.max(Math.ceil((t-e)/n),0),s=Array(r);for(var o=0;o<r;o++,e+=n)s[o]=e;return s};var Lt=function(e,t,n,r,i){if(r instanceof t){var o=yt(e[s]),u=e[a](o,i);return dt[m](u)?u:o}return e[a](n,i)};dt.bind=function(e,t){if(ct&&e.bind===ct)return ct[a](e,ot[c](arguments,1));if(!dt[u](e))throw new TypeError("Bind must be called on a function");var n=ot[c](arguments,2),r=function(){return Lt(e,r,t,this,n.concat(ot[c](arguments)))};return r},dt[M]=function(e){var t=ot[c](arguments,1),n=function(){var i=0,s=t[r],o=Array(s);for(var u=0;u<s;u++)o[u]=t[u]===dt?arguments[i++]:t[u];while(i<arguments[r])o[p](arguments[i++]);return Lt(e,n,this,this,o)};return n},dt.bindAll=function(e){var t,n=arguments[r],i;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)i=arguments[t],e[i]=dt.bind(e[i],e);return e},dt.memoize=function(e,t){var n=function(r){var i=n.cache,s=""+(t?t[a](this,arguments):r);return dt.has(i,s)||(i[s]=e[a](this,arguments)),i[s]};return n.cache={},n},dt.delay=function(e,t){var n=ot[c](arguments,2);return setTimeout(function(){return e[a](i,n)},t)},dt.defer=dt[M](dt.delay,dt,1),dt.throttle=function(e,t,n){var r,s,u,f=i,l=0;n||(n={});var c=function(){l=n.leading===o?0:dt.now(),f=i,u=e[a](r,s),f||(r=s=i)};return function(){var h=dt.now();!l&&n.leading===o&&(l=h);var p=t-(h-l);return r=this,s=arguments,p<=0||p>t?(f&&(clearTimeout(f),f=i),l=h,u=e[a](r,s),f||(r=s=i)):!f&&n.trailing!==o&&(f=setTimeout(c,p)),u}},dt.debounce=function(e,t,n){var r,s,o,u,f,l=function(){var c=dt.now()-u;c<t&&c>=0?r=setTimeout(l,t-c):(r=i,n||(f=e[a](o,s),r||(o=s=i)))};return function(){o=this,s=arguments,u=dt.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(f=e[a](o,s),o=s=i),f}},dt.wrap=function(e,t){return dt[M](t,e)},dt[J]=function(e){return function(){return!e[a](this,arguments)}},dt.compose=function(){var e=arguments,t=e[r]-1;return function(){var n=t,r=e[t][a](this,arguments);while(n--)r=e[n][c](this,r);return r}},dt.after=function(e,t){return function(){if(--e<1)return t[a](this,arguments)}},dt.before=function(e,t){var n;return function(){return--e>0&&(n=t[a](this,arguments)),e<=1&&(t=i),n}},dt.once=dt[M](dt.before,2);var At=!{toString:i}[x](E),Ot=[$,"isPrototypeOf",E,x,D,"toLocaleString"];dt[d]=function(e){if(!dt[m](e))return[];if(lt)return lt(e);var t=[];for(var n in e)dt.has(e,n)&&t[p](n);return At&&Mt(e,t),t},dt[H]=function(e){if(!dt[m](e))return[];var t=[];for(var n in e)t[p](n);return At&&Mt(e,t),t},dt[S]=function(e){var t=dt[d](e),n=t[r],i=Array(n);for(var s=0;s<n;s++)i[s]=e[t[s]];return i},dt.mapObject=function(e,t,n){t=mt(t,n);var i=dt[d](e),s=i[r],o={},u;for(var a=0;a<s;a++)u=i[a],o[u]=t(e[u],u,e);return o},dt.pairs=function(e){var t=dt[d](e),n=t[r],i=Array(n);for(var s=0;s<n;s++)i[s]=[t[s],e[t[s]]];return i},dt.invert=function(e){var t={},n=dt[d](e);for(var i=0,s=n[r];i<s;i++)t[e[n[i]]]=n[i];return t},dt.functions=dt.methods=function(e){var t=[];for(var n in e)dt[u](e[n])&&t[p](n);return t.sort()},dt.extend=gt(dt[H]),dt[B]=dt.assign=gt(dt[d]),dt.findKey=function(e,t,n){t=mt(t,n);var i=dt[d](e),s;for(var o=0,u=i[r];o<u;o++){s=i[o];if(t(e[s],s,e))return s}},dt.pick=function(e,t,n){var s={},a=e,f,l;if(a==i)return s;dt[u](t)?(l=dt[H](a),f=vt(t,n)):(l=Nt(arguments,o,o,1),f=function(e,t,n){return t in n},a=Object(a));for(var c=0,h=l[r];c<h;c++){var p=l[c],d=a[p];f(d,p,a)&&(s[p]=d)}return s},dt.omit=function(e,t,n){if(dt[u](t))t=dt[J](t);else{var r=dt.map(Nt(arguments,o,o,1),String);t=function(e,t){return!dt[l](r,t)}}return dt.pick(e,t,n)},dt.defaults=gt(dt[H],v),dt.create=function(e,t){var n=yt(e);return t&&dt[B](n,t),n},dt.clone=function(e){return dt[m](e)?dt[w](e)?e[_]():dt.extend({},e):e},dt.tap=function(e,t){return t(e),e},dt.isMatch=function(e,t){var n=dt[d](t),s=n[r];if(e==i)return!s;var u=Object(e);for(var a=0;a<s;a++){var f=n[a];if(t[f]!==u[f]||!(f in u))return o}return v};var _t=function(e,t,n,s){if(e===t)return e!==0||1/e===1/t;if(e==i||t==i)return e===t;e instanceof dt&&(e=e[h]),t instanceof dt&&(t=t[h]);var a=ut[c](e);if(a!==ut[c](t))return o;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case T:return+e===+t}var l=a===N;if(!l){if(typeof e!=y||typeof t!=y)return o;var m=e[f],g=t[f];if(m!==g&&!(dt[u](m)&&m instanceof m&&dt[u](g)&&g instanceof g)&&f in e&&f in t)return o}n=n||[],s=s||[];var b=n[r];while(b--)if(n[b]===e)return s[b]===t;n[p](e),s[p](t);if(l){b=e[r];if(b!==t[r])return o;while(b--)if(!_t(e[b],t[b],n,s))return o}else{var w=dt[d](e),E;b=w[r];if(dt[d](t)[r]!==b)return o;while(b--){E=w[b];if(!dt.has(t,E)||!_t(e[E],t[E],n,s))return o}}return n.pop(),s.pop(),v};dt.isEqual=function(e,t){return _t(e,t)},dt.isEmpty=function(e){return e==i?v:St(e)&&(dt[w](e)||dt.isString(e)||dt[b](e))?e[r]===0:dt[d](e)[r]===0},dt.isElement=function(e){return!!e&&e.nodeType===1},dt[w]=ft||function(e){return ut[c](e)===N},dt[m]=function(e){var t=typeof e;return t===g||t===y&&!!e},dt[C](["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){dt["is"+e]=function(t){return ut[c](t)==="[object "+e+"]"}}),dt[b](arguments)||(dt[b]=function(e){return dt.has(e,"callee")}),typeof /./!=g&&typeof Int8Array!=y&&(dt[u]=function(e){return typeof e==g||o}),dt.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},dt.isNaN=function(e){return dt.isNumber(e)&&e!==+e},dt.isBoolean=function(e){return e===v||e===o||ut[c](e)===T},dt.isNull=function(e){return e===i},dt.isUndefined=function(e){return e===void 0},dt.has=function(e,t){return e!=i&&at[c](e,t)},dt.noConflict=function(){return e._=tt,this},dt[k]=function(e){return e},dt.constant=function(e){return function(){return e}},dt.noop=function(){},dt[U]=bt,dt.propertyOf=function(e){return e==i?function(){}:function(t){return e[t]}},dt[P]=dt.matches=function(e){return e=dt[B]({},e),function(t){return dt.isMatch(t,e)}},dt.times=function(e,t,n){var r=Array(Math.max(0,e));t=vt(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},dt[R]=function(e,t){return t==i&&(t=e,e=0),e+Math.floor(Math[R]()*(t-e+1))},dt.now=Date.now||function(){return(new Date).getTime()};var Dt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Pt=dt.invert(Dt),Ht=function(e){var t=function(t){return e[t]},n="(?:"+dt[d](e).join("|")+")",r=RegExp(n),s=RegExp(n,"g");return function(e){return e=e==i?"":""+e,r.test(e)?e[W](s,t):e}};dt.escape=Ht(Dt),dt.unescape=Ht(Pt),dt.result=function(e,t,n){var r=e==i?void 0:e[t];return r===void 0&&(r=n),dt[u](r)?r[c](e):r};var Bt=0;dt.uniqueId=function(e){var t=++Bt+"";return e?e+t:t},dt[j]={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var jt=/(.)^/,Ft={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},It=/\\|'|\r|\n|\u2028|\u2029/g,qt=function(e){return"\\"+Ft[e]};dt.template=function(e,t,n){!t&&n&&(t=n),t=dt.defaults({},t,dt[j]);var i=RegExp([(t.escape||jt)[A],(t.interpolate||jt)[A],(t.evaluate||jt)[A]].join("|")+"|$","g"),s=0,o="__p+='";e[W](i,function(t,n,i,u,a){return o+=e[_](s,a)[W](It,qt),s=a+t[r],n?o+=q+n+"))==null?'':_.escape(__t))+\n'":i?o+=q+i+"))==null?'':__t)+\n'":u&&(o+="';\n"+u+"\n__p+='"),t}),o+="';\n",t[K]||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var u=new Function(t[K]||"obj","_",o)}catch(a){throw a[A]=o,a}var f=function(e){return u[c](this,e,dt)},l=t[K]||"obj";return f[A]="function("+l+"){\n"+o+"}",f},dt.chain=function(e){var t=dt(e);return t._chain=v,t};var Rt=function(e,t){return e._chain?dt(t).chain():t};dt.mixin=function(e){dt[C](dt.functions(e),function(t){var n=dt[t]=e[t];dt[s][t]=function(){var e=[this[h]];return st[a](e,arguments),Rt(this,n[a](dt,e))}})},dt.mixin(dt),dt[C](["pop",p,"reverse","shift","sort","splice","unshift"],function(e){var t=nt[e];dt[s][e]=function(){var n=this[h];return t[a](n,arguments),(e==="shift"||e==="splice")&&n[r]===0&&delete n[0],Rt(this,n)}}),dt[C](["concat","join",_],function(e){var t=nt[e];dt[s][e]=function(){return Rt(this,t[a](this[h],arguments))}}),dt[s][X]=function(){return this[h]},dt[s][$]=dt[s].toJSON=dt[s][X],dt[s][E]=function(){return""+this[h]},typeof define===g&&define.amd&&define("underscore",[],function(){return dt})}))[c](this)},{}]},{},[16])(16)});